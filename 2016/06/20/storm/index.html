<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>storm | Shawshank</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">storm</h1><a id="logo" href="/.">Shawshank</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">storm</h1><div class="post-meta">Jun 20, 2016</div><div class="post-content"><h2 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h2><p><a href="http://storm.apache.org/" target="_blank" rel="noopener">官网</a></p>
<p><a href="http://storm.apache.org/releases/0.9.6/javadocs/index.html" target="_blank" rel="noopener">0.9.6 javadocs</a></p>
<p><a href="http://blog.csdn.net/wust__wangfan/article/details/50412695" target="_blank" rel="noopener">单词计数示例</a></p>
<p><a href="https://github.com/storm-book" target="_blank" rel="noopener">storm-book示例</a></p>
<p><a href="http://www.aboutyun.com/thread-12372-1-1.html" target="_blank" rel="noopener">storm源码分析之topology提交过程</a></p>
<p>storm 用来完成：任务的并发提交，路由，调度，和执行。</p>
<h2 id="storm-编程中使用的核心-API"><a href="#storm-编程中使用的核心-API" class="headerlink" title="storm 编程中使用的核心 API"></a>storm 编程中使用的核心 API</h2><ul>
<li><p>backtype.storm.topology.IComponent</p>
<p>  拓扑结构中所有 component 的核心接口</p>
</li>
<li><p>backtype.storm.spout.ISpout</p>
<p>  spouts 的接口</p>
</li>
<li><p>backtype.storm.task.IBolt</p>
<p>  bolt 的接口</p>
</li>
<li><p>backtype.storm.task.TopologyContext</p>
<p>  拓扑上下文信息</p>
</li>
<li><p>backtype.storm.spout.SpoutOutputCollector</p>
<p>  This output collector exposes the API for emitting tuples from an backtype.storm.topology.IRichSpout. The main difference between this output collector and OutputCollector for backtype.storm.topology.IRichBolt is that spouts can tag messages with ids so that they can be acked or failed later on. This is the Spout portion of Storm’s API to guarantee that each message is fully processed at least once.</p>
</li>
<li><p>backtype.storm.task.OutputCollector</p>
<p>  This output collector exposes the API for emitting tuples from an IRichBolt. This is the core API for emitting tuples. For a simpler API, and a more restricted form of stream processing, see IBasicBolt and BasicOutputCollector.</p>
</li>
</ul>
<h2 id="storm-并发机制"><a href="#storm-并发机制" class="headerlink" title="storm 并发机制"></a>storm 并发机制</h2><h3 id="配置-executor-和-task"><a href="#配置-executor-和-task" class="headerlink" title="配置 executor 和 task"></a>配置 executor 和 task</h3><p>配置示例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.setBolt(COUNT_BOLT_ID, countBolt, <span class="number">2</span>).setNumTasks(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>其中 setBolt 调用的第3个参数，就是设置并发数，也就是executor(线程)数。</p>
<p>setNumTasks 设置 bolt 个数</p>
<p>相关参考文档：<br><a href="http://storm.apache.org/releases/1.0.1/Understanding-the-parallelism-of-a-Storm-topology.html" target="_blank" rel="noopener">Parallelism of a Storm Topology</a></p>
<h2 id="启动-storm-集群"><a href="#启动-storm-集群" class="headerlink" title="启动 storm 集群"></a>启动 storm 集群</h2><ol>
<li><p>启动 zookeeper</p>
</li>
<li><p>启动 nimbus</p>
</li>
<li><p>启动 supervisor</p>
</li>
<li><p>启动 ui</p>
</li>
<li><p>提交 topology</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">storm jar storm-book-0.0.1-SNAPSHOT.jar &#123;strom-topology-name&#125; &#123;stormname&#125;</span><br></pre></td></tr></table></figure>
<ol start="0">
<li>kill topology</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">storm <span class="built_in">kill</span> &#123;stormname&#125;</span><br></pre></td></tr></table></figure>
<h2 id="storm-日志配置"><a href="#storm-日志配置" class="headerlink" title="storm 日志配置"></a>storm 日志配置</h2><p>配置文件在 ${STORM_HOME}/logback/cluster.xml</p>
<p>日志文件默认路径<br>${STORM_HOME}/logs</p>
<h2 id="storm-componet的生命周期"><a href="#storm-componet的生命周期" class="headerlink" title="storm componet的生命周期"></a>storm componet的生命周期</h2><p>参考：</p>
<p><a href="http://blog.csdn.net/nana5love/article/details/41524037" target="_blank" rel="noopener">Storm bolt/spout生命周期</a></p>
<p><a href="http://blog.csdn.net/nana5love/article/details/41524469" target="_blank" rel="noopener">Twitter Storm源代码分析之Topology的执行过程</a></p>
<p><a href="http://my.oschina.net/ericquan8/blog/614279" target="_blank" rel="noopener">从storm-jdbc谈谈component的生命周期</a></p>
<h2 id="实时计算-相关参考"><a href="#实时计算-相关参考" class="headerlink" title="实时计算 相关参考"></a>实时计算 相关参考</h2><p><a href="https://segmentfault.com/a/1190000002686611" target="_blank" rel="noopener">实时计算的技术难点</a></p>
<p><a href="http://f.dataguru.cn/thread-429705-1-1.html" target="_blank" rel="noopener">Storm 实现滑动窗口计数</a></p>
<p><a href="http://kitmenke.com/blog/2014/08/04/tick-tuples-within-storm/" target="_blank" rel="noopener">Tick tuples within Storm</a></p>
<p><a href="http://weyo.me/pages/techs/storm-continuous-batch-process/" target="_blank" rel="noopener">Strom 连续多级批处理实践</a></p>
<p><a href="http://weyo.me/tag/shi-shi-ji-suan.html" target="_blank" rel="noopener">storm 实时计算</a></p>
<p><a href="https://segmentfault.com/a/1190000003048757" target="_blank" rel="noopener">流式统计的几个难点</a></p>
<p><a href="http://www.jdon.com/bigdata/streaming-big-data-storm-spark.html" target="_blank" rel="noopener">实时流Streaming大数据：Storm,Spark和Samza</a></p>
<p><a href="http://blackwing.iteye.com/blog/2147633" target="_blank" rel="noopener">那些storm的坑坑</a></p>
<p><a href="http://iamzhongyong.iteye.com/blog/2194382" target="_blank" rel="noopener">Storm核心概念剖析</a></p>
<p><a href="http://storm.apache.org/releases/current/Concepts.html" target="_blank" rel="noopener">Storm Concepts</a></p>
</div><div class="tags"><a href="/tags/storm/">storm</a></div><div class="post-nav"><a class="pre" href="/2016/06/20/ArrayList/">ArrayList</a><a class="next" href="/2016/06/17/java集合类框架/">集合类框架</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/interface/" style="font-size: 15px;">interface</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/Collections/" style="font-size: 15px;">Collections</a> <a href="/tags/Collection/" style="font-size: 15px;">Collection</a> <a href="/tags/J-U-C/" style="font-size: 15px;">J.U.C</a> <a href="/tags/lock/" style="font-size: 15px;">lock</a> <a href="/tags/Semaphore/" style="font-size: 15px;">Semaphore</a> <a href="/tags/CountDownLatch/" style="font-size: 15px;">CountDownLatch</a> <a href="/tags/CyclicBarrier/" style="font-size: 15px;">CyclicBarrier</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/LinkedList/" style="font-size: 15px;">LinkedList</a> <a href="/tags/Queue/" style="font-size: 15px;">Queue</a> <a href="/tags/Set/" style="font-size: 15px;">Set</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/collection/" style="font-size: 15px;">collection</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/api/" style="font-size: 15px;">api</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/mvc/" style="font-size: 15px;">mvc</a> <a href="/tags/context/" style="font-size: 15px;">context</a> <a href="/tags/component-scan/" style="font-size: 15px;">component-scan</a> <a href="/tags/storm/" style="font-size: 15px;">storm</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/命令行/" style="font-size: 15px;">命令行</a> <a href="/tags/cmder/" style="font-size: 15px;">cmder</a> <a href="/tags/win/" style="font-size: 15px;">win</a> <a href="/tags/效率/" style="font-size: 15px;">效率</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/博客/" style="font-size: 15px;">博客</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/extends/" style="font-size: 15px;">extends</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/svn/" style="font-size: 15px;">svn</a> <a href="/tags/BlockingQueue/" style="font-size: 15px;">BlockingQueue</a> <a href="/tags/LinkedBlockingQueue/" style="font-size: 15px;">LinkedBlockingQueue</a> <a href="/tags/PriorityBlockingQueue/" style="font-size: 15px;">PriorityBlockingQueue</a> <a href="/tags/ConcurrentLinkedQueue/" style="font-size: 15px;">ConcurrentLinkedQueue</a> <a href="/tags/CopyOnWriteArrayList/" style="font-size: 15px;">CopyOnWriteArrayList</a> <a href="/tags/接口/" style="font-size: 15px;">接口</a> <a href="/tags/抽象类/" style="font-size: 15px;">抽象类</a> <a href="/tags/Executor/" style="font-size: 15px;">Executor</a> <a href="/tags/ExecutorService/" style="font-size: 15px;">ExecutorService</a> <a href="/tags/CompletionService/" style="font-size: 15px;">CompletionService</a> <a href="/tags/ThreadPoolExecutor/" style="font-size: 15px;">ThreadPoolExecutor</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/vundle/" style="font-size: 15px;">vundle</a> <a href="/tags/ArrayList/" style="font-size: 15px;">ArrayList</a> <a href="/tags/log/" style="font-size: 15px;">log</a> <a href="/tags/index/" style="font-size: 15px;">index</a> <a href="/tags/concepts/" style="font-size: 15px;">concepts</a> <a href="/tags/Timer/" style="font-size: 15px;">Timer</a> <a href="/tags/TimerTask/" style="font-size: 15px;">TimerTask</a> <a href="/tags/ConcurrentMap/" style="font-size: 15px;">ConcurrentMap</a> <a href="/tags/ConcurrentHashMap/" style="font-size: 15px;">ConcurrentHashMap</a> <a href="/tags/HashMap/" style="font-size: 15px;">HashMap</a> <a href="/tags/ReentrantReadWriteLock/" style="font-size: 15px;">ReentrantReadWriteLock</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/SynchronousQueue/" style="font-size: 15px;">SynchronousQueue</a> <a href="/tags/ScheduledExecutorService/" style="font-size: 15px;">ScheduledExecutorService</a> <a href="/tags/AQS/" style="font-size: 15px;">AQS</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/BigData-docker/">Windows 上安装 docker</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/mysql-0.路线/">Mysql学习路线</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/mysql-索引/">Mysql安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/Qunar基础框架-QSchedule/">Qunar基础框架-QSchedule</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/java集合构架中使用到的数据结构和算法/">java集合构架中使用到的数据结构和算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/20/reids-调试环境搭建/">redis-调试环境搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/OpenStack-安装/">OpenStack-安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/26/JVM-hotspot-GC机制/">JVM-hotspot-GC机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/11/netty-socketio + socket.io 实现消息推送/">netty-socketio + socket.io 实现消息推送</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/26/mongodb-安装/">mongodb-安装</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/a-ray-of-sunshine" title="github" target="_blank">github</a><ul></ul><a href="http://www.cnblogs.com/a-ray-of-sunshine" title="cnblog" target="_blank">cnblog</a><ul></ul><a href="http://blog.csdn.net/a_ray_of_sunshine" title="csdn" target="_blank">csdn</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Shawshank.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>